[context.production.environment]
NEXT_PUBLIC_SANITY_TAG = "default"
NEXT_PUBLIC_SANITY_DATASET = "production"
NEXT_PUBLIC_BLOCK_EXPLORER = "https://www.mintscan.io"
NEXT_PUBLIC_LEDGER_CHAIN_ID = "regen-1"
NEXT_PUBLIC_SENTRY_ENABLED = "true"
NEXT_PUBLIC_SENTRY_ENVIRONMENT = "production"
NEXT_PUBLIC_ANALYTICS_ENABLED = "true"
NEXT_PUBLIC_BRIDGE_CREDIT_CLASS_ID = "C03"
NEXT_PUBLIC_GA_MEASUREMENT_ID = "G-6ZGJM8JXYN"
NEXT_PUBLIC_TOUCAN_LINK = "https://toucan.earth/overview?chainId=137"
NEXT_PUBLIC_SKIPPED_CLASS_ID = "C01"
NEXT_PUBLIC_DEPLOY_CONTEXT = "production"

[context.production]
  command = "yarn build"

[context.dev]
  command = "yarn build"

[context.dev.environment]
NEXT_PUBLIC_SANITY_TAG = "default"
NEXT_PUBLIC_SANITY_DATASET = "staging"
NEXT_PUBLIC_RECAPTCHA_SITE_KEY = "6LchxlAaAAAAANjtO3w4b5ihVCL87tYfbe0ltzp9"
NEXT_PUBLIC_INTERCOM_APP_ID = "kn5di10s"
NEXT_PUBLIC_LEDGER_CHAIN_ID = "regen-upgrade"
NEXT_PUBLIC_LEDGER_CHAIN_NAME = "Regen - Upgrade Testnet"
NEXT_PUBLIC_BLOCK_EXPLORER = "https://explorer-regen-upgrade.vitwit.com"
NEXT_PUBLIC_SENTRY_ENVIRONMENT = "development"
NEXT_PUBLIC_TOUCAN_LINK = "https://test.app.toucan.earth/?chainId=137"
NEXT_PUBLIC_BRIDGE_API_URI = "https://toucan-bridge-staging.herokuapp.com"
NEXT_PUBLIC_BRIDGE_CREDIT_CLASS_ID = "C56"
NEXT_PUBLIC_BRIDGE = "true"
NEXT_PUBLIC_SKIPPED_CLASS_ID = ""
NEXT_PUBLIC_DEPLOY_CONTEXT = "development"

[context.deploy-preview.environment]
NEXT_PUBLIC_SANITY_DATASET = "staging"
NEXT_PUBLIC_RECAPTCHA_SITE_KEY = "6LchxlAaAAAAANjtO3w4b5ihVCL87tYfbe0ltzp9"
NEXT_PUBLIC_INTERCOM_APP_ID = "kn5di10s"
NEXT_PUBLIC_LEDGER_CHAIN_ID = "regen-upgrade"
NEXT_PUBLIC_LEDGER_CHAIN_NAME = "Regen - Upgrade Testnet"
NEXT_PUBLIC_BLOCK_EXPLORER = "https://explorer-regen-upgrade.vitwit.com"
NEXT_PUBLIC_SENTRY_ENVIRONMENT = "development"
NEXT_PUBLIC_TOUCAN_LINK = "https://test.app.toucan.earth/?chainId=137"
NEXT_PUBLIC_BRIDGE_API_URI = "https://toucan-bridge-staging.herokuapp.com"
NEXT_PUBLIC_BRIDGE_CREDIT_CLASS_ID = "C56"
NEXT_PUBLIC_BRIDGE = "true"
NEXT_PUBLIC_SKIPPED_CLASS_ID = ""
NEXT_PUBLIC_ANALYTICS_ENABLED = "true"
NEXT_PUBLIC_DEPLOY_CONTEXT = "development"

[context.deploy-preview]
  base = "."
  command = "bun run build"
  publish = "web-marketplace/.next"

[[context.deploy-preview.plugins]]
  package = "@netlify/plugin-nextjs"

[context.deploy-preview.functions.functionsSource]
  node_bundler = "esbuild"
  external_node_modules = [
    "@keplr-wallet",
    "@ledgerhq/hw-app-eth",
    "@ethereumjs",
    "mapbox-gl",
    "libsodium-sumo.js",
    "@regen-network/api",
    "chain-registry",
    "pdfjs-dist",
    "xlsx"
  ]
  included_files = [
    "!public/jpg/**",
    "!public/png/**",
    "!public/svg/**"
  ]



[build]
  command = "bun run build"
  publish = "web-marketplace/.next"

[build.environment]
NODE_OPTIONS = "--max-old-space-size=10216"

[[redirects]]
from = "https://app.regen.network/create-methodology"
to = "https://app.regen.network"
force = true
status = 302


[[redirects]]
from = "https://app.regen.network/create-methodology/methodology-review-process"
to = "https://app.regen.network"
force = true
status = 302

[[redirects]]
from = "https://app.regen.network/buyers/"
to = "https://www.regen.network/buyers"
force = true
status = 302

[[redirects]]
from = "https://app.regen.network/ecocredits/*"
to = "https://app.regen.network/dashboard/:splat"
force = true
status = 302

[[redirects]]
from = "https://app.regen.network/ecocredits/accounts/*"
to = "https://app.regen.network/profiles/:splat"
force = true
status = 302
