fragment partyFields on Party {
  id
  type
  name
  description
  image
  organizationByPartyId {
    ...organizationFields
  }
  userByPartyId {
    id
  }
  addressByAddressId {
    id
    feature
  }
  walletByWalletId {
    id
    addr
  }
}

fragment organizationFields on Organization {
  id
  website
  organizationMembersByOrganizationId(condition: { isOwner: true }) {
    nodes {
      userByMemberId {
        id
        partyId
        partyByPartyId {
          name
          roles
        }
      }
    }
  }
}

fragment creditVintageFields on CreditVintage {
  id
  createdAt
  startDate
  endDate
  initialDistribution
  units
  certificateLink
  txHash
  batchDenom
  creditClassVersionByCreditClassVersionIdAndCreditClassVersionCreatedAt {
    name
    version
    metadata
    documentId
  }
  methodologyVersionByMethodologyVersionIdAndMethodologyVersionCreatedAt {
    name
    version
    documentId
  }
  walletByTokenizerId {
    addr
    partiesByWalletId(first: 1) {
      nodes {
        ...partyFields
      }
    }
  }
}

query ProjectByHandle($handle: String!) {
  projectByHandle(handle: $handle) {
    ...projectFields
  }
}
