fragment purchasesFields on PurchasesConnection {
  nodes {
    id
    createdAt
    walletByBuyerWalletId {
      partiesByWalletId(first: 1) {
        nodes {
          name
        }
      }
    }
    transactionsByPurchaseId {
      nodes {
        units
      }
    }
    creditVintageByCreditVintageId {
      id
      startDate
      endDate
      initialDistribution
      metadata
      walletByTokenizerId {
        partiesByWalletId(first: 1) {
          nodes {
            name
            organizationByPartyId {
              id
              organizationMembersByOrganizationId(condition: { isOwner: true }) {
                nodes {
                  roles
                  userByMemberId {
                    partyByPartyId {
                      name
                      roles
                    }
                  }
                }
              }
            }
          }
        }
      }
      partyByIssuerId {
        name
        image
      }
      creditClassVersionByCreditClassVersionIdAndCreditClassVersionCreatedAt {
        name
        version
        metadata
        creditClassById {
          handle
          standard
        }
      }
      methodologyVersionByMethodologyVersionIdAndMethodologyVersionCreatedAt {
        name
        version
        metadata
        methodologyById {
          handle
        }
      }
      projectByProjectId {
        name
        area
        areaUnit
        image
        type
        handle
        metadata
        addressByAddressId {
          feature
        }
        partyByLandOwnerId {
          ...projectParty
        }
        partyByStewardId {
          ...projectParty
        }
        partyByDeveloperId {
          ...projectParty
        }
      }
    }
  }
}

fragment projectParty on Party {
  id
  name
  organizationByPartyId {
    id
    organizationMembersByOrganizationId(condition: { isOwner: true }) {
      nodes {
        roles
        userByMemberId {
          partyByPartyId {
            name
            roles
          }
        }
      }
    }
  }
}
