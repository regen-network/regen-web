fragment partyFields on Party {
  name
  description
  organizationByPartyId {
    ...organizationFields
  }
  addressByAddressId {
    feature
  }
  walletByWalletId {
    addr
  }
}

fragment organizationFields on Organization {
  id
  organizationMembersByOrganizationId(condition: { isOwner: true }) {
    nodes {
      userByMemberId {
        partyByPartyId {
          name
          roles
        }
      }
    }
  }
}

query ProjectByHandle($handle: String!) {
  projectByHandle(handle: $handle) {
    eventsByProjectId(orderBy: DATE_ASC) {
      nodes {
        date
        summary
        description
        creditVintageByEventId {
          id
          createdAt
          startDate
          endDate
          initialDistribution
          units
          certificateLink
          txHash
          creditClassVersionByCreditClassVersionIdAndCreditClassVersionCreatedAt {
            name
            version
            metadata
            creditClassById {
              handle
            }
          }
          methodologyVersionByMethodologyVersionIdAndMethodologyVersionCreatedAt {
            name
            version
            methodologyById {
              handle
            }
          }
          walletByTokenizerId {
            addr
            partiesByWalletId(first: 1) {
              nodes {
                ...partyFields
              }
            }
          }
        }
      }
    }
    name
    partyByDeveloperId {
      ...partyFields
    }
    partyByStewardId {
      ...partyFields
    }
    partyByLandOwnerId {
      ...partyFields
    }
    documentsByProjectId {
      nodes {
        name
        type
        date
        url
        eventByEventId {
          date
          summary
          description
          creditVintageByEventId {
            id
            createdAt
            startDate
            endDate
            initialDistribution
            units
            certificateLink
            txHash
            walletByTokenizerId {
              addr
              partiesByWalletId(first: 1) {
                nodes {
                  ...partyFields
                }
              }
            }
          }
        }
      }
    }
  }
}
